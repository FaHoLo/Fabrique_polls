# Сайт опросов

Сайт опросник для Fabrique

## Как запустить отладочный сервер

- Скачайте код
- Установите зависимости командой `pip install -r requirements.txt`
- Создайте БД командой `python3 manage.py migrate`
- Запустите сервер разработки командой `python3 manage.py runserver`
- Откройте сайт в бразуере `http://127.0.0.1:8000/`
- для входа в [админку](http://127.0.0.1:8000/admin) создайте пользователя командой `python3 manage.py createsuperuser`

Про разворачивание на боевом сервере [тут](https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-18-04-ru)

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 2 переменные:
- `DEBUG` — дебаг-режим. Поставьте `True`, чтобы увидеть отладочную информацию в случае ошибки.
- `SECRET_KEY` — секретный ключ проекта

## Документация к API

Доступные `/api/` эндпоинты:

_Без регистрации (аноним авторизуется автоматически):_

- `polls/active/` - активные опросы | __GET__
- `polls/user/` - опросы в которых участвовал текущий пользователь | __GET__
- `polls/vote/` - отправить ответ на вопрос опроса | __POST__

_Требуются права администратора:_

- `polls/` - все существующие опросы и создание нового | __GET, POST__
- `polls/<id:int>` - просмотр/редактирование/удаление опроса | __GET, PUT, DELETE__
- `questions/` - все существующие вопросы и создание нового | __GET, POST__
- `questions/<id:int>` - просмотр/редактирование/удаление вопроса опроса | __GET, PUT, DELETE__

Работа по добавлению/изменению/удалению опросов и их вопросов также реализована в [админке сайта](http://127.0.0.1:8000/admin).
